{% extends "web/base.html" %}
{% load bootstrap4 %}
{% load mathfilters %}

{% block maincontent %}

<table class="table">
  <thead>
    <tr>
      <th class="align-top">Code</th>
      <th class="align-top">Term</th>
      <th class="align-top">Subject</th>
      <th class="align-top">Teachers</th>
      <th class="align-top">Types</th>
      <th class="align-top">Lang.</th>
      <th class="align-top text-right">students (prev. year)</th>
      <th class="align-top text-right">TAs (theory)</th>
      <th class="align-top text-right">TAs (requested)</th>
      <th class="align-top text-right">TAs (approved)</th>
      <th class="align-top text-right">TAs (hired)</th>
      <th class="align-top text-right">TAS (to be filled)</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {% for course in courses %}
      <tr>
        <td>{{ course.code }}</td>
        <td>{{ course.term }}</td>
        <td>{{ course.subject }}</td>
        <td>
          <ul>
            {% for teacher in course.teachers.all %}
            <li>{{ teacher.last_name }}, {{ teacher.first_name }}</li>
            {% endfor %}
          </ul>
        </td>
        <td>
          <ul>
            {% if course.has_course %}<li>Course</li>{% endif %}
            {% if course.has_exercises %}<li>Exercises</li>{% endif %}
            {% if course.has_project %}<li>Project</li>{% endif %}
            {% if course.has_practical_work %}<li>Practical work</li>{% endif %}
          </ul>
        </td>
        <td>{% if course.taughtInFrench %}F{% endif %}{% if course.taughtInEnglish %}E{% endif %}{% if course.taughtInGerman %}G{% endif %} </td>
        <td class="text-right">{{ course.numberOfStudents|default_if_none:"&nbsp;" }}</td>
        <td class="text-right">{{ course.calculatedNumberOfTAs|default_if_none:"&nbsp;" }}</td>
        <td class="text-right">{{ course.requestedNumberOfTAs|default_if_none:"&nbsp;" }}</td>
        <td class="text-right">{{ course.approvedNumberOfTAs|default_if_none:"&nbsp;" }}</td>
        <td class="text-right">{{ course.applications_accepted|default_if_none:"&nbsp;" }}</td>
        <td class="text-right">{{ course.approvedNumberOfTAs|sub:course.applications_accepted|default_if_none:"&nbsp;" }}</td>
        <td><a class="btn btn-outline-primary" href="{% url "web:accept_theoretical_number_of_tas" course_id=course.id %}">Accept theoretical # of TAs</a></td>
        <td><a class="btn btn-outline-primary" href="{% url "web:request_for_TA" course_id=course.id %}">Request TAs</a></td>
      </tr>
    {% endfor %}
  </tbody>

</table>

{% endblock maincontent %}
