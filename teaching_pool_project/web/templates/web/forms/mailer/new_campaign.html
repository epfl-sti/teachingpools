{% extends "web/base.html" %}
{% load bootstrap4 %}
{% load extra_tags %}
{% load static %}

{% block maincontent %}
<h1>New email campaign</h1>
<div id="output"></div>
<form id="form" method="POST">
    <div class="form-group">
        <label for="ToAddresses">To</label>
        <textarea required id="ToAddresses" class="form-control" aria-describedby="ToAddressesHelp" placeholder="destination email addresses"></textarea>
        <small id="ToAddressesHelp" class="form-text text-muted">List of destination email addresses (one per line).</small>
    </div>
    <div class="form-group">
        <label for="Subject">Subject</label>
        <input required type="text" id="Subject" class="form-control" aria-describedby="SubjectHelp" placeholder="subject"></input>
        <small id="SubjectHelp" class="form-text text-muted">The text that will appear as subject of the message.</small>
    </div>
    <div class="form-group">
        <label for="Message">Message</label>
        <textarea required name="Message" id="Message" class="form-control" aria-describedby="MessageHelp" placeholder="message"></textarea>
        <small id="MessageHelp" class="form-text text-muted">Message you want to send.</small>
    </div>
    <button type="submit" class="btn btn-primary"><i id="loading_spinner" style="display: none;" class="spinner-border spinner-border-sm"></i>Send</button>
</form>
{% endblock maincontent %}

{% block scripts %}
<script src="https://cdn.tiny.cloud/1/w6ta4xwcaxdd6v6tr8iz1qkl2255s7vce9abmyczepgv1igd/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>
<script>
    let csrf_token = "{{ csrf_token }}";
    let post_url = "{% url 'web:new_mailer_campaign_post' %}";
    let success_redirect_url = "{% url 'web:get_mail_campaigns' %}";
</script>
<script type="text/javascript" src="{% static 'web/js/forms/mailer/new_campaign.js' %}"></script>
{% endblock scripts %}
